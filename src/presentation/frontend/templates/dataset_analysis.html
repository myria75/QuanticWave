{% extends "base.html" %}
{% block title %}Dataset Analysis{% endblock %}

{% block scripts %}
    <script>
        var ctx = document.getElementById("patternChart").getContext("2d");
        var patternChart = new Chart(ctx, {
            type: "line", 
            data: {
                labels: {{ labels | safe }},
                datasets: [
                    {
                        label: "Pattern chart",
                        data: {{ values | safe | tojson }},
                        fill: false,
                        borderColor: "rgb(75, 192, 192)",
                        lineTension: 0.1 
                    }
                ]
            },
            options: {
                responsive: true
            } 
        });
    </script>
{% endblock %}


{% block content %}
    <p>Content</p>
    <form id="auto-submit-form">
        {{ form.csrf_token }}
        <div class="form-group container text-center">
          <div class="row align-items-center justify-content-center">
            <div class="col-auto">
              {{ form.path.label() }}:         
            </div>
            <div class="col-auto">
              {{ form.path(class="form-select", id="path", onchange="this.form.submit()") }}        
            </div>
          </div>
        </div>
    </form>

    <div>
        <p>Ac√° el grafico</p>
        <canvas id="patternChart" width="900" height="400"></canvas>
    </div>
    <div class="overflow-auto">
        <table class="table table-hover">
            <thead style>
                {% for header in table_header %} 
                    <th scope="col">{{ header }}</th>
                {% endfor %}        
            </thead>
            <tbody>
                {% for row in table_content %}
                <tr>
                    {% for item in row %}
                    <td>{{ item }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script>
        document.getElementById('path').addEventListener('change', function() {
            document.getElementById('auto-submit-form').submit();
        });
    </script>
{% endblock %}