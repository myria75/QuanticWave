<!DOCTYPE html>
{% load static %}
{% load mathfilters %}
<html>
    <body>
        <div class="results-div">
            <div class="container-div">
                <span class="cabin-bullet dark-green inline-item">3)</span>
                <p class="cabin-h1 semidark-blue inline-item">Results</p>
                <div class="btn btn-primary tooltip">
                    <span class="inline-item">
                        <img class="inline-button" src="{% static 'imgs/icons/info.png' %}">
                    </span>
                    <div class="right">
                        <h3 class="cabin-help-h dark-green">Pattern List</h3>
                        <p class="cabin-help-p dark-blue">The Patterns that QCPD looks for are listed in the section <b>Menu > Pattern List</b>.<br><br>For more documentation for those, also check the <b>Menu > References</b></p>
                        <i></i>
                    </div>
                </div>
            </div>
            <p class="cabin-p dark-blue">The different pattern matches found are listed below. For each appearance <i>name</i>, <i>position</i> and <i>fragment</i> is shown. If needed, some considerations and feedback will be shown in section 4.<br><br></p>

            <div class="table-div">
                <table border="1" class="result-table">
                    <tr>
                        <th class="result-table-header"><p class="cabin-table-h dark-green"><u class="cabin-table-u">Type</u></p></th>
                        <th class="result-table-header"><p class="cabin-table-h dark-green"><u class="cabin-table-u">Pattern</u></p></th>
                        <th class="result-table-header"><p class="cabin-table-h dark-green"><u class="cabin-table-u">Position</u></p></th>
                    </tr>
                    {% with id=0 %}
                        {% for key, values in matches.items %}
                            {% if values|length != 0 %}
                                {% for sub_key, sub_value in values.items %}
                                <tr>
                                    {% if forloop.first %}
                                        <td rowspan="{{ values|length }}"><p class="cabin-table-p dark-blue">{{ key }}</p></td>
                                    {% endif %}
                                    <td><p class="cabin-table-p dark-blue">{{ sub_key }}</p></td>
                                    <td><p class="cabin-table-p dark-blue">Qubit: {{ sub_value.0 }}, Column: {{ sub_value.1 }}</p></td>
                                </tr>
                                {% endfor %}
                            {% endif %}
                        {% endfor %}
                    {% endwith %}
                </table>

                <div class="slideshow-div">
                    {% if matches.items|length != 0 %}
                        {% for key, values in matches.items %}
                            {% for sub_key, sub_value in values.items %}
                                <div class="my-slides fade slideshow-iframe-container">
                                    <iframe class="slideshow-iframe" src="http://172.20.48.7:8000/{{ sub_value.2 }}"></iframe>
                                    <div class="text cabin-table-p dark-green">Pattern #{{ sub_key }}</div>
                                </div>
                            {% endfor %}
                        {% endfor %}
        
                        <!-- Next and previous buttons -->
                        <a id="prev-btn" class="prev">&#10094;</a>
                        <a id="next-btn" class="next">&#10095;</a>
                    {% else %}
                        <p>No patterns found</p>
                    {% endif %}
                </div>

                <script src="{% static 'js/results.js' %}"></script>
            </div>

        </div>
    </body>
</html>
